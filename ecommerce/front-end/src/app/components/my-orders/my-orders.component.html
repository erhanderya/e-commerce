<div class="my-orders-container">
  <h2>My Orders</h2>

  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <p>Loading your orders...</p>
  </div>

  <div *ngIf="!loading && error" class="error-message">
    <p>{{ error }}</p>
    <button (click)="loadOrders()">Try Again</button>
  </div>

  <div *ngIf="!loading && !error && orders.length === 0" class="no-orders">
    <p>You haven't placed any orders yet.</p>
    <a routerLink="/products" class="shop-now-btn">Shop Now</a>
  </div>

  <div *ngIf="!loading && !error && orders.length > 0" class="orders-list">
    <div *ngFor="let order of orders" class="order-card">
      <div class="order-header">
        <div class="order-info">
          <h3>Order #{{ order.id }}</h3>
          <p class="order-date">Placed on {{ formatDate(order.orderDate) }}</p>
        </div>
        <div class="order-status" [ngStyle]="{'background-color': getStatusColor(order.status)}">
          {{ getStatusLabel(order.status) }}
        </div>
      </div>

      <div class="order-address">
        <h4>Shipping Address</h4>
        <p>{{ order.shippingAddress.street }}, {{ order.shippingAddress.city }}, {{ order.shippingAddress.state }} {{ order.shippingAddress.zipCode }}, {{ order.shippingAddress.country }}</p>
      </div>

      <div class="order-items">
        <table>
          <thead>
            <tr>
              <th>Product</th>
              <th>Quantity</th>
              <th>Price</th>
              <th>Subtotal</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of order.items">
              <td class="product-info">
                <div *ngIf="item.product.image_url" class="product-image">
                  <img [src]="item.product.image_url" [alt]="item.product.name">
                </div>
                <div class="product-name">
                  <a [routerLink]="['/products', item.product.id]">{{ item.product.name }}</a>
                </div>
              </td>
              <td>{{ item.quantity }}</td>
              <td>${{ item.price }}</td>
              <td>${{ item.quantity * item.price }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="order-total">
        <h4>Total: ${{ order.totalAmount }}</h4>
      </div>

      <div class="order-actions">
        <a [routerLink]="['/orders', order.id]" class="view-details-btn">View Details</a>
      </div>
    </div>
  </div>
</div>
